# Ejercicio yml

## Creacion
Dentro de este yml podremos ver que tenemos un directorio padre llamado **services** el cual guarda los servicios o contenedores que vamos lanzar. Una vez dentro de este veremos que tenemos **postgres1**, **postgres2**, **odoo1**, **odoo2**, estos son los encargados de montar los contenedores especificos, ***IMPORTANTE:*** los nombres deben ser distintos, es decir, no podemos montar contenedores si tienen el mismo nombre (no podemos poner uno llamado postgress y otro llamado postgress).

Dentro de estas ramas veremos lo siguiente:
```yml
  postgres1:
    image: postgres:14
    container_name:
    environment:
      - POSTGRES_DB=postgres
      - POSTGRES_USER=odoo
      - POSTGRES_PASSWORD=paso
    volumes:
      - ./OdooDev/dataDev:/var/lib/postgresql/data # Le especificamos el volumen donde queremos que se encuentre los datos
```
- image: Nombre de la imagen del contenedor
- container_name: Nombre que le pondremos al contenedor
- environment: Aqui definimos nombre, ususario y contraseña que usaremos
    - POSTGRES_DB= Nombre base Datos
    - POSTGRES_USER= Nombre del user
    - POSTGRES_PASSWORD= contraseña
- volumes: Le especificamos el volumen donde queremos que se encuentre los  datos

Por la parte del paquete odoo tendremos la misma estructura:
```yml
  odoo1:
    image: odoo:16
    container_name: odooDev
    environment:
      - HOST=postgres
      - USER=odoo
      - PASSWORD=paso
    ports:
      - '8069:8069'
    volumes:
      - ./OdooDev/volumesOdoo/addons:/mnt/extra-addons
      - ./OdooDev/volumesOdoo/filestore:/var/lib/odoo/filestore
      - ./OdooDev/volumesOdoo/sessions:/var/lib/odoo/sessions
    depends_on:
      - postgres1
    command: --dev=all
```

Agregando a mayores:
- ports: donde le especificaremos el puerto a usar **IMPORTANTE** no pisar el puerto de otro contenedor, es decir, poner puerto diferentes para no tener problemas
- depends_on: Aqui le indicamos que va a depender de una base de datos en nuestro caso
- command: este es para que se nos permita usar todos los comandos de desarrollador

## Codigo yml del ejercicio

```yml
services:
  postgres1:
    image: postgres:14
    container_name: dbdev
    environment:
      - POSTGRES_DB=postgres
      - POSTGRES_USER=odoo
      - POSTGRES_PASSWORD=paso
    volumes:
      - ./OdooDev/dataDev:/var/lib/postgresql/data

  postgres2:
    image: postgres:14
    container_name: dbprod
    environment:
      - POSTGRES_DB=postgres
      - POSTGRES_USER=odoo
      - POSTGRES_PASSWORD=paso
    volumes:
      - ./OdooDev/dataProd:/var/lib/postgresql/data

  odoo1:
    image: odoo:16
    container_name: odooDev
    environment:
      - HOST=postgres
      - USER=odoo
      - PASSWORD=paso
    ports:
      - '8069:8069'
    volumes:
      - ./OdooDev/volumesOdoo/addons:/mnt/extra-addons
      - ./OdooDev/volumesOdoo/filestore:/var/lib/odoo/filestore
      - ./OdooDev/volumesOdoo/sessions:/var/lib/odoo/sessions
    depends_on:
      - postgres1
    command: --dev=all

  odoo2:
    image: odoo:16
    container_name: odooProd
    environment:
      - HOST=postgres
      - USER=odoo
      - PASSWORD=paso
    ports:
      - '8070:8069'
    volumes:
      - ./OdooProd/volumesOdoo/addons:/mnt/extra-addons
    depends_on:
      - postgres2
    command: --dev=all
```